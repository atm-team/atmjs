
# 模块模板开发
## www/common/1.0.0模块模板开发
* 前台所有的页面都有一个公用的顶部工具条,因此在`html`目录下新建`toolbar.html`代码片段
```
<div class="toolbar">
this is toolbar
</div>
```
## www/help/1.0.0模块模板开发
* 打开初始化生成的 `html/help.html` 模板,大致代码如下：
```html
<!doctype html>
{{ atmjs.use() }}
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
    {{ atmjs.loadCss() }}
</head>
<body>

{{ atmjs.loadJs() }}
</body>
</html>
```
* 其中atmjs.use的参数为空,代表入口脚本为src目录下与当前模块名同名的js文件
* 如果不同名,eg:`www/help/1.0.0/src/help2.js`,则需要使用`{{ atmjs.use(':help2') }}`来声明
* `{{ atmjs.loadCss() }}` 生成依赖的css标签
* `{{ atmjs.loadJs() }}` 生成依赖的js标签
* `{{ title }}`默认为当前文件名,可以在模板列表页通过点击备注修改
* 跨模块引入 `www/common/1.0.0/html/toolbar.html`
```html
<!-- ... -->
<body>
    {% include 'html/toolbar.html' | path('www/common') %}

<!-- ... -->
```
* 至此,帮助中心的模板已经完毕

# 模块静态文件开发

## 开发www/common/1.0.0模块静态文件
* 在src目录下新建common.css
* `src/common.js`依赖`src/common.css`, `src/common.js`代码如下：
```js
// @require ./common.css
```
* 至此,我们的`www/common/1.0.0`模块已经搭建完毕

## 开发www/help/1.0.0模块静态文件
* 在src目录下新建help.css
* `src/help.js`依赖`www/common/1.0.0/src/common.js`和'src/help.css`
* 从GUI中查看到`www/common/1.0.0/src/common.js`文件的id为 `www/common:common`
* `src/help.js`文件代码如下:
```
require('www/common:common');
// @require ./help.css
```
* 再次查看`http://127.0.0.1:2015/files/blog/www/help/1.0.0/html/help.html`模板,可以看到 `www/common/1.0.0/src/common.css`,`www/help/1.0.0/src/help.css`,`www/common/1.0.0/src/common.js`,`www/common/1.0.0/src/help.js`都已被引入到模板

# 关于构建
* 打开`~/blog/www/help/1.0.0/config.json`文件,发现配置里的dev字段的值为true,
该配置可以使在每次打开带有`{{ atmjs.use(*) }}`的模板时先构建该模块到dev,然后再渲染模板
* 构建到`dev`后,可以在模块目录下发现一个`dist`文件夹,该文件夹下为编译后的静态文件
* `dist/manifest`目录下的json文件存放着该模块内的静态文件依赖关系
