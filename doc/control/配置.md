# 配置文件

## 配置文件分类
1. 站点配置（位于站点目录下的 /atmjs/site.json文件）
2. 项目配置（位于项目目录下的/config.json 文件)
3. 版本配置 (位于版本目录下的 /config.json 文件)

## 配置文件优先级
1. 优先级：版本配置 > 项目配置 > 站点配置
2. 站点配置和项目配置对公共模块不起作用，因此公共项目下不应存在config.json
3. 对于builds字段的配置,并不是覆盖式,而是连接式
## 通用配置选项
> 以下选项同时适用于适用于站点配置,项目配置和版本配置

```
{
  "dev": true,                            // 是否在开发阶段,默认为false
  "close": false,                         // 是否关闭,默认为false
  "debugParam": "debugId",                // 调试参数
  "loaderId": "parser:parser",            // 加载器ID
  "builds": [                             // eg
    {                                     // 版本目录下的/unrelease目录下的文件不产出
      "glob": "/unrelease",
      "release": false,
      "important": true
    },
    {                                     // 版本目录下的/test目录下的文件名不用md5字符
      "reg": "^test\/",
      "useHash": false,
      "important": true
    },
    {                                     // /unmod目录下的文件不模块化
      "glob": "/unmod/**.js",
      "isMod": false,
      "important": true
    }
  ],                           // 构建设置
  "alias": {                              // 别名设置
    "jquery": "jquery:jquery"
  },
  "deps": {                               // 依赖版本设置
    "jquery": "^1.11.3"
  },
  "together": false,                      // 生成的静态文件是否保留版本目录
  "formatTag": false                     // 是否在地图文件里面的js标签之间和css标签之间换行,默认不美化
}
```

```
dev: 当前是否处于开发阶段,如过设为true,则在模板中调用atmjs.use时会执行构建。默认为false

builds[].** 具体参考[fis3相关配置](http://fis.baidu.com/fis3/docs/api/config-props.html)
builds[].media 当前规则适用的构建目标,若无配置,则适用于所有构建目标
builds[].important 当前规则是否重要 (若为true则不会被其他规则覆盖,默认为false)
builds[].glob      文件的glob匹配规则
builds[].reg       文件的正则表达式匹配规则
builds[].i         是否忽略正则表达式里面的大小写(只在reg匹配时有效),true/false 默认为false
builds[].release   设置文件的产出路径。默认是文件相对项目根目录的路径，以 / 开头。该值可以设置为 false ，表示为不产出（unreleasable）文件。

builds[].isMod     是否为模块化
builds[].useHash   文件名后是否加上7位md5值
builds[].rExt      文件后缀
```

## 版本特有配置

```js
{
  "exports": {
    "fileId1": {},
    "fileId2": {
      "unMod": true
    }
  },
  "packs": {
    "/path/to/pkgName1.js": [
      "/src/file1.js",
      "/src/path/to/file2.js"
    ],

    "/path/to/pkgName1.css": [
      "/src/file1.css",
      "/src/path/to/file2.css"
    ]

    // ...

  }
}

// exports 定义了哪些静态文件需要生成地图
// fileId  不带命名空间的文件id(即文件id冒号后面的部分)
// unMod   是否不用模块化,如果设置为false,则页面不会加载模块解析器脚本

// packs 合并配置
```
